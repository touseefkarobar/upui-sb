import{r as u,j as e}from"./iframe-BK5b18Ej.js";import{S as te}from"./index-CHP24U9l.js";import{A as L}from"./index-B7OyZ-Oi.js";import{F as m}from"./index-D0CsoHYq.js";import{I as se}from"./index-CiXK0u8H.js";import{S}from"./index-ULHohA-U.js";import{B as f}from"./index-C4G_6AIl.js";import{T as c}from"./Text-xFwLHrNk.js";import{a as A}from"./index-Dq7h7Pqt.js";import{T as l}from"./TextLink-CQO2IU8t.js";import{S as re}from"./SaveIcon-BoKyOoZt.js";import{O as K}from"./OpenIcon-DX8UV0Zh.js";import{C as ne}from"./CloseIcon-9UGrIeW1.js";import{L as ce}from"./LearningIcon-mHTXj8qq.js";const{__:s}=wp.i18n,oe=({textDomain:t,activateLicenseApi:w,deactivateLicenseApi:k,isFromDiviMarket:o,licenseData:h={key:"",licence_status:"",licence_expire:"",last_check:null},findLicenseKeyLink:P,setLicenseData:i})=>{const d=h.key!==""&&h.licence_status==="active",v="License key cannot be empty",[y,j]=u.useState(""),[T,p]=u.useState(!1),[_,E]=u.useState(!1),[g,C]=u.useState("info"),[x,Y]=u.useState("There was a problem activating the license: Invalid licence key"),F=o?"Plugin Purchased From The Divi Marketplace":"License Key",q="Enter the license key you received when purchased this product. You can access your license key any time by logging into your account on the Pee-Aye Creative website. You can learn more about this in our ",M="License Key Management Guide.",O="https://www.peeayecreative.com/docs/product-license-key-management/",H="Thanks for installing our plugin! Since you purchased this plugin through the",V="Divi Marketplace,",B="you do",N="not need to enter a license key here.",Q="To receive updates, just make sure your Elegant Themes username and API key are entered into your website under",R="Divi>Theme Options>Updates.",G="That's how Elegant Themes verifies your purchases and delivers updates for all Marketplace products.",U="If you need help finding your API key or managing your Elegant Themes account, you can use their ",z="Customer FAQ",J=" or reach out to their team via the support chat on ",W="elegantthemes.com.",X="License Key",Z="Enter Your License Key Here",b=()=>{window.open(P,"_blank")},a=(n,r)=>{C(n),Y(r),E(!0)},I=(n,r)=>{p(!1),n.data.status==="success"?r==null||r():a("error",n.data.message||"Something went wrong")},$=async n=>{if(n.preventDefault(),!!w){if(!y.trim()){a("error",v);return}p(!0);try{const r=await A.post(w,{key:y});I(r,()=>{const ee={key:y,last_check:Math.floor(Date.now()/1e3),licence_status:r.data.licence_status,licence_expire:r.data.licence_expire};i==null||i(ee),a("success","License Key Connected Successfully")})}catch{p(!1),a("error","Activation failed")}}},D=async n=>{if(n.preventDefault(),!!k){p(!0);try{const r=await A.post(k,{request:"deactivate"});I(r,()=>{j(""),i==null||i({key:"",last_check:"",licence_status:"",licence_expire:""}),a("info",r.data.message)})}catch{p(!1),a("error","Deactivation failed")}}};return e.jsx(te,{title:s(F,t),children:e.jsxs(S,{gap:15,children:[o?e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[s(H,t)," ",e.jsx(c,{weight:"semibold",as:"span",children:s(V,t)})," ",s(B,t)," ",e.jsx(c,{weight:"semibold",as:"span",children:s(N,t)})]}),e.jsxs(c,{children:[s(Q,t)," ",e.jsx(c,{weight:"semibold",as:"span",children:s(R,t)})," ",s(G,t)]}),e.jsxs(c,{children:[s(U,t),e.jsx(l,{href:"https://www.elegantthemes.com/marketplace/customer-faq/",target:"_blank",children:s(z,t)}),s(J,t),e.jsx(l,{href:"https://www.elegantthemes.com/",target:"_blank",children:s(W,t)})]})]}):e.jsxs(c,{children:[s(q,t),e.jsxs(l,{href:O,target:"_blank",children:[" ",s(M,t)]})]}),!o&&(h.key!==""&&h.licence_status==="active"?e.jsx(f,{onClick:b,leftIcon:K,variant:"primary",children:s("View Your Account",t)}):e.jsx(f,{onClick:b,leftIcon:K,variant:"primary",children:s("Find License Key In Your Account",t)})),!o&&_&&e.jsx(L,{width:"stretch",type:g,title:s(x,t),description:g==="error"&&x!==v?e.jsxs(c,{children:[s("Please check the",t)," ",e.jsx(l,{href:"https://www.peeayecreative.com/docs/divi-assistant/troubleshooting-faqs/",target:"_blank",children:s("license key troubleshooting & FAQs",t)})," ",s("to learn more about this error and what steps to take next.",t)]}):""}),o&&e.jsx(L,{width:"stretch",type:"light",title:s("Prefer a lifetime license?",t),description:e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[s("The Divi Marketplace only offers annual licenses, but we also sell this plugin on our own website with a lifetime purchase option at ",t),e.jsx(l,{href:"https://www.peeayecreative.com/shop/",target:"_blank",children:s("peeayecreative.com/shop.",t)}),s(" If you decide to switch to the lifetime version, be sure to ",t),e.jsx(l,{href:"https://www.peeayecreative.com/docs/divi-marketplace-customers/",target:"_blank",children:s("follow this guide",t)}),s(" for a few important steps on replacing the plugin file.",t)]}),e.jsx(f,{style:{marginTop:"15px"},leftIcon:ce,variant:"primary",children:s("Learn More",t)})]})}),!o&&e.jsx("form",{id:"license-activiation-form",children:e.jsxs(S,{gap:15,children:[e.jsxs(m,{id:"License Key",children:[e.jsx(m.Title,{children:s(X,t)}),e.jsx(m.Field,{children:e.jsx(se,{"aria-invalid":_&&g==="error",name:"license-activation-key",autoComplete:"off",readOnly:d,disabled:d,placeholder:d?h.key:s(Z,t),value:d?"":y,onChange:n=>j(n.target.value)})})]}),d?e.jsx(f,{onClick:D,leftIcon:ne,variant:"danger",loading:T,children:s("Deactivate",t)}):e.jsx(f,{onClick:$,leftIcon:re,variant:"secondary",loading:T,children:s("Save Changes",t)})]})})]})})};oe.__docgenInfo={description:"",methods:[],displayName:"LicensePage",props:{licenseData:{defaultValue:{value:`{\r
  key: "",\r
  licence_status: "",\r
  licence_expire: "",\r
  last_check: null,\r
}`,computed:!1},required:!1}}};export{oe as L};
