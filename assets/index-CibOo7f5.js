import{j as e,r as h}from"./iframe-CUVGimHO.js";import{S as j}from"./index-CfgdRxfU.js";import{s as J}from"./type-Bc9hys3F.js";import{I as _}from"./index-BOFZSjZO.js";import{S as w}from"./index-DkImC_4z.js";import{u as xe}from"./useOutsideToggle-OEvXF8CJ.js";import{F as fe}from"./FilledIcon-CencGAuQ.js";import{R as Ce}from"./ResetIcon-BgAY0J97.js";import{B as O}from"./index-B-KNbm76.js";const _e="_wrapper_c1tau_3",be="_trigger_c1tau_8",je="_activeColor_c1tau_22",we="_base_c1tau_29",ye="_small_c1tau_54",Fe="_popup_c1tau_82",Se="_up_c1tau_97",Ne="_down_c1tau_101",ke="_canvasMock_c1tau_105",Ie="_colorCanvas_c1tau_113",$e="_canvasShade_c1tau_121",Me="_hueSliderWrap_c1tau_135",Le="_alphaSliderWrap_c1tau_136",Re="_hueSlider_c1tau_135",Te="_alphaSlider_c1tau_136",He="_presets_c1tau_193",Ee="_presetColor_c1tau_198",ze="_comboWrapper_c1tau_208",We="_divider_c1tau_218",Be="_input_c1tau_233",Pe="_selecttrigger_c1tau_246",Ve="_select_c1tau_246",qe="_alphaInput_c1tau_260",De="_Inputhex_c1tau_266",t={wrapper:_e,trigger:be,activeColor:je,"global-color-picker":"_global-color-picker_c1tau_29",base:we,"corner-cutout":"_corner-cutout_c1tau_43",small:ye,popup:Fe,up:Se,down:Ne,canvasMock:ke,colorCanvas:Ie,canvasShade:$e,hueSliderWrap:Me,alphaSliderWrap:Le,hueSlider:Re,alphaSlider:Te,presets:He,presetColor:Ee,comboWrapper:ze,divider:We,input:Be,selecttrigger:Pe,select:Ve,alphaInput:qe,Inputhex:De},P=({size:s="base",color:n="var(--pac-upui-icon)"})=>{const l=J[s]||J.base;return e.jsxs("svg",{width:l,height:l,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M14.5696 0.69638C14.3489 0.475603 14.0868 0.300471 13.7984 0.180985C13.51 0.0614989 13.2008 0 12.8886 0C12.5764 0 12.2673 0.0614989 11.9789 0.180985C11.6904 0.300471 11.4284 0.475603 11.2076 0.69638L9.52622 2.37699L8.96601 1.816C8.89239 1.74243 8.80501 1.68408 8.70884 1.64429C8.61267 1.60449 8.50961 1.58403 8.40553 1.58407C8.30145 1.5841 8.1984 1.60464 8.10226 1.6445C8.00612 1.68437 7.91878 1.74277 7.84521 1.81639C7.77164 1.89001 7.7133 1.9774 7.6735 2.07357C7.63371 2.16974 7.61324 2.2728 7.61328 2.37688C7.61332 2.48095 7.63385 2.584 7.67372 2.68014C7.71358 2.77628 7.77199 2.86363 7.84561 2.9372L12.328 7.41883C12.478 7.55971 12.677 7.63669 12.8828 7.63349C13.0885 7.6303 13.285 7.54717 13.4305 7.40171C13.5761 7.25624 13.6594 7.05985 13.6627 6.85409C13.6661 6.64832 13.5892 6.44933 13.4484 6.29921L12.8882 5.73901L14.5696 4.05761C15.0153 3.61183 15.2656 3.00732 15.2656 2.37699C15.2656 1.74667 15.0153 1.14215 14.5696 0.69638V0.69638Z",fill:n}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.86822 4.034L1.70518 10.1978C1.35739 10.5454 1.12592 10.9923 1.04262 11.4769C0.959321 11.9615 1.0283 12.46 1.24006 12.9038L0 14.1438L1.12041 15.265L2.36046 14.0242C2.80416 14.236 3.30262 14.3051 3.78721 14.222C4.27181 14.1388 4.71872 13.9075 5.0664 13.5598L11.2294 7.39681L7.86822 4.0332V4.034ZM8.98862 7.39601L7.86822 6.2756L2.82558 11.3182C2.68125 11.4677 2.60138 11.6678 2.60319 11.8756C2.60499 12.0833 2.68833 12.2821 2.83524 12.429C2.98215 12.5759 3.18088 12.6592 3.38864 12.661C3.5964 12.6628 3.79655 12.583 3.94599 12.4386L8.98862 7.39601Z",fill:n})]})};P.__docgenInfo={description:"",methods:[],displayName:"ColorPickerIcon",props:{size:{required:!1,tsType:{name:"union",raw:`| "xsmall"
| "small"
| "base"
| "medium"
| "large"
| "xlarge"
| "2xlarge"
| "3xlarge"
| "4xlarge"
| "5xlarge"
| "6xlarge"`,elements:[{name:"literal",value:'"xsmall"'},{name:"literal",value:'"small"'},{name:"literal",value:'"base"'},{name:"literal",value:'"medium"'},{name:"literal",value:'"large"'},{name:"literal",value:'"xlarge"'},{name:"literal",value:'"2xlarge"'},{name:"literal",value:'"3xlarge"'},{name:"literal",value:'"4xlarge"'},{name:"literal",value:'"5xlarge"'},{name:"literal",value:'"6xlarge"'}]},description:"",defaultValue:{value:'"base"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"var(--pac-upui-icon)"',computed:!1}}}};const K=""+new URL("color_picker_bg-C-XbJ_WF.jpg",import.meta.url).href;function Ue(s){const n=s.match(/^hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)$/i);if(!n)return null;const[l,i,o,m]=n;return{h:parseInt(i),s:parseFloat(o),l:parseFloat(m)}}function Q(s){let n=s.replace(/^#/,"");return!n||n.length!==3&&n.length!==6?{r:0,g:0,b:0}:(n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:parseInt(n.slice(0,2),16),g:parseInt(n.slice(2,4),16),b:parseInt(n.slice(4,6),16)})}function T(s){const{r:n,g:l,b:i}=Q(s);return Ge(n,l,i)}function ee(s,n,l){n/=100,l/=100;let i=(1-Math.abs(2*l-1))*n,o=i*(1-Math.abs(s/60%2-1)),m=l-i/2,d=0,v=0,g=0;return 0<=s&&s<60?[d,v,g]=[i,o,0]:60<=s&&s<120?[d,v,g]=[o,i,0]:120<=s&&s<180?[d,v,g]=[0,i,o]:180<=s&&s<240?[d,v,g]=[0,o,i]:240<=s&&s<300?[d,v,g]=[o,0,i]:300<=s&&s<360&&([d,v,g]=[i,0,o]),{r:Math.round((d+m)*255),g:Math.round((v+m)*255),b:Math.round((g+m)*255)}}function B(s){if(!s)return;const{h:n,s:l,l:i}=Ue(s),{r:o,g:m,b:d}=ee(n,l,i);return ae(o,m,d)}function ae(s,n,l){return"#"+[s,n,l].map(i=>{const o=i.toString(16);return o.length===1?"0"+o:o}).join("")}function Ge(s,n,l){s/=255,n/=255,l/=255;const i=Math.max(s,n,l),o=Math.min(s,n,l);let m=0,d=0;const v=(i+o)/2;if(i!==o){const g=i-o;switch(d=v>.5?g/(2-i-o):g/(i+o),i){case s:m=((n-l)/g+(n<l?6:0))*60;break;case n:m=((l-s)/g+2)*60;break;case l:m=((s-n)/g+4)*60;break}}return{h:Math.round(m),s:Math.round(d*100),l:Math.round(v*100)}}const Xe=({color:s,setColor:n,opacity:l=1,setOpacity:i,globalPicker:o=!1,preset:m,variant:d="base",popupDirection:v="up",enableConfirmation:g=!1})=>{const[te,Ze]=h.useState(s),[u,x]=h.useState(s),{isOpen:H,toggle:V,ref:se}=xe(!1),[b,F]=h.useState(0),[S,N]=h.useState(0),[k,I]=h.useState(0),[$,ne]=h.useState("RGB"),[re,q]=h.useState(!1),[le,ie]=h.useState({width:0,height:0}),[L,D]=h.useState({r:0,g:255,b:0}),oe=h.useRef(null),M=h.useRef(null),y=h.useCallback(()=>{if(M.current){const a=M.current.getBoundingClientRect();ie({width:a.width,height:a.height})}},[]);h.useEffect(()=>(y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)),[y]);const ce=()=>{const{width:a,height:c}=le,r=S/100*a;let p=0;if(a>0&&c>0){const f=100-r/a*50,C=0;p=c*(1-(k-C)/(f-C)),p=Math.max(0,Math.min(c,p))}return{left:r,top:p}},ue=a=>{const c=parseInt(a.target.value);F(c);const r=B(`hsl(${c}, ${S}%, ${k}%)`);x(r||"")},R=a=>{let c=a.target.value;if(c===""){i(0);return}/^0\d+/.test(c)&&(c=c.replace(/^0+/,""));const r=parseInt(c,10);if(!isNaN(r)){const p=Math.max(0,Math.min(100,r));i(p*.01)}},U=(a,c)=>{if(!M.current)return;const r=M.current.getBoundingClientRect(),p=Math.max(0,Math.min(r.width,a-r.left)),f=Math.max(0,Math.min(r.height,c-r.top)),C=r.width,W=r.height,ge=100-p/C*50,A=0,Z=Math.round(A+(ge-A)*(1-f/W)),Y=Math.round(p/C*100);N(Y),I(Z);const ve=`hsl(${b}, ${Y}%, ${Z}%)`;x(B(ve)??"")},pe=a=>{q(!0),U(a.clientX,a.clientY)},de=a=>{re&&U(a.clientX,a.clientY)},G=()=>{q(!1)};h.useEffect(()=>{const{h:a,s:c,l:r}=T(u)||{h:0,s:0,l:0};F(a),N(c),I(r)},[u]),h.useEffect(()=>{if(u){let a;u.startsWith("#")?a=Q(u):u.startsWith("hsl")?a=ee(b,S,k):a={r:0,g:0,b:0},D(a)}else D({r:0,g:0,b:0})},[u]);const E=(a,c)=>{let r=parseInt(c);isNaN(r)&&(r=0),r=Math.max(0,Math.min(255,r));const p={...L,[a]:r},f=ae(p.r,p.g,p.b);x(f)},z=(a,c)=>{let r=parseInt(c);isNaN(r)&&(r=0),r=Math.max(0,Math.min(a==="h"?359:100,r));let p=b,f=S,C=k;a==="h"?p=r:a==="s"?f=r:C=r;const W=B(`hsl(${p}, ${f}%, ${C}%)`);x(W||"")},he=a=>{const r=`#${a.trim().replace(/^#/,"")}`,{h:p,s:f,l:C}=T(r);x(r),F(p),N(f),I(C)},me=a=>{const{h:c,s:r,l:p}=T(a);x(a),F(c),N(r),I(p)};h.useEffect(()=>{H&&setTimeout(y,0)},[H,y]);const X=ce();return h.useEffect(()=>{g||n(u)},[u,x]),e.jsxs("div",{className:t.wrapper,ref:se,children:[e.jsxs("div",{style:{backgroundImage:`url(${K})`,backgroundSize:"contain",borderRadius:"100px",WebkitBackgroundSize:"700%",position:"relative"},children:[e.jsx("div",{className:`${o&&(u||d==="small")?t["global-color-picker"]:t.trigger} ${u&&!o?t.activeColor:""} ${d?t[d]:""}`,style:{backgroundColor:u,borderColor:u.toUpperCase()==="#FFFFFF"?"var(--pac-upui-medium)":u,borderWidth:u?"1px":"2px",opacity:l},onClick:V,children:o&&e.jsx("div",{className:t["corner-cutout"],style:{backgroundColor:u.toUpperCase()==="#FFFFFF"?"var(--pac-upui-medium)":"white"}})}),d==="base"&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",inset:"0"},onClick:V,children:e.jsx(P,{size:"xsmall",color:u.toUpperCase()==="#FFFFFF"||l<.33||!u?"var(--pac-upui-icon)":"white"})})]}),H&&e.jsxs("div",{className:`${t.popup} ${t[v]}`,ref:oe,children:[e.jsx("div",{className:t.canvasMock,children:e.jsxs("div",{className:t.colorCanvas,ref:M,style:{"--hue":b,position:"relative"},onPointerDown:pe,onPointerMove:de,onPointerUp:G,onPointerLeave:G,children:[e.jsx("div",{className:t.canvasShade}),e.jsx("div",{className:t.selectionMarker,style:{position:"absolute",left:X.left+"px",top:X.top+"px",width:"16px",height:"16px",borderRadius:"50%",border:"2px solid  var(--pac-upui-white)",boxShadow:"0 0 2px rgba(0,0,0,0.5)",pointerEvents:"none",background:u,transform:"translate(-50%, -50%)"}})]})}),e.jsxs(j,{gap:12,children:[e.jsxs(j,{direction:"horizontal",children:[e.jsx(Ae,{handleEyeDropperClick:me,color:u,opacity:l}),e.jsxs(j,{gap:12,style:{flexGrow:1},children:[e.jsx("input",{type:"range",min:"0",max:"359",value:b,className:t.hueSlider,onChange:ue}),e.jsx("input",{type:"range",min:"0",max:"100",value:l*100,className:t.alphaSlider,onChange:R,style:{background:`linear-gradient(to right, rgba(0,0,0,0), hsl(${b}, 100%, 50%))`}})]})]}),e.jsxs(j,{gap:12,children:[e.jsxs(j,{direction:"horizontal",alignItems:"center",children:[e.jsx(fe,{onClick:()=>x(""),icon:Ce,size:"xlarge",rounded:!0,fillColor:"var(--pac-upui-background)"})," ",e.jsxs("div",{className:`${t.comboWrapper} `,children:[e.jsxs(w,{onValueChange:ne,defaultValue:$,defaultLabel:$,className:`${t.select}`,children:[e.jsx(w.Trigger,{className:`${t.selecttrigger}`,children:e.jsx(w.Value,{})}),e.jsxs(w.Content,{className:t.content,children:[e.jsx(w.Item,{value:"RGB",children:"RGB"}),e.jsx(w.Item,{value:"HSL",children:"HSL"}),e.jsx(w.Item,{value:"HEX",children:"HEX"})]})]}),$==="RGB"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"R: ",value:L.r,onChange:a=>E("r",a.target.value),className:`${t.input} `}),e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"G:",value:L.g,onChange:a=>E("g",a.target.value),className:`${t.input} `}),e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"B:",value:L.b,onChange:a=>E("b",a.target.value),className:`${t.input} `}),e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"%",value:l*100,onChange:a=>R(a),className:`${t.input} ${t.alphaInput} `})]}),$==="HSL"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"H: ",value:b,onChange:a=>z("h",a.target.value),className:`${t.input} `}),e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"S:",value:S,onChange:a=>z("s",a.target.value),className:`${t.input} `}),e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"L:",value:k,onChange:a=>z("l",a.target.value),className:`${t.input} `}),e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"%",value:l*100,onChange:a=>R(a),className:`${t.input} ${t.alphaInput} `})]}),$==="HEX"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.divider}),e.jsx(_,{type:"text",value:u||"#000000",onChange:a=>he(a.target.value),maxLength:7,className:`${t.input} ${t.Inputhex}`}),e.jsx("div",{className:t.divider}),e.jsx(_,{caption:"%",value:l*100,onChange:a=>R(a),className:`${t.input} ${t.alphaInput} ${t.alphaInputhex}`})]})]})]}),e.jsx(j,{direction:"horizontal",className:t.presets,children:m.map(a=>e.jsx("div",{className:t.presetColor,style:{backgroundColor:a,borderColor:a.toUpperCase()==="#FFFFFF"?"var(--pac-upui-medium)":a},onClick:()=>{const{h:c,s:r,l:p}=T(a);x(a),F(c),N(r),I(p)}},a))}),g&&e.jsxs(j,{direction:"horizontal",children:[e.jsx(O,{variant:"tertiary",width:"stretch",onClick:()=>x(te),children:"Cancel"}),e.jsx(O,{variant:"secondary",width:"stretch",onClick:()=>n(u),children:"Confirm"})]})]})]})]})]})},Ae=({color:s,opacity:n,handleEyeDropperClick:l})=>{const i=async()=>{if(!("EyeDropper"in window)){alert("Eyedropper API not supported");return}try{const m=await new window.EyeDropper().open();l(m.sRGBHex)}catch(o){console.error(o)}};return e.jsxs("div",{style:{backgroundImage:`url(${K})`,backgroundSize:"contain",borderRadius:"100px",WebkitBackgroundSize:"700%",position:"relative"},children:[e.jsx("div",{className:`${t.trigger} ${s?t.activeColor:""}`,style:{backgroundColor:s,borderColor:s.toUpperCase()==="#FFFFFF"?"var(--pac-upui-medium)":s,borderWidth:s?"1px":"2px",opacity:n}}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",inset:"0"},onClick:i,children:e.jsx(P,{size:"xsmall",color:s.toUpperCase()==="#FFFFFF"||n<.33||!s?"var(--pac-upui-icon)":"white"})})]})};Xe.__docgenInfo={description:"",methods:[],displayName:"CustomColorPicker",props:{color:{required:!0,tsType:{name:"string"},description:""},setColor:{required:!0,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""},opacity:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},setOpacity:{required:!0,tsType:{name:"signature",type:"function",raw:"(opacity: number) => void",signature:{arguments:[{type:{name:"number"},name:"opacity"}],return:{name:"void"}}},description:""},globalPicker:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:'"small" | "base"',elements:[{name:"literal",value:'"small"'},{name:"literal",value:'"base"'}]},description:"",defaultValue:{value:'"base"',computed:!1}},preset:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},popupDirection:{required:!1,tsType:{name:"union",raw:'"up" | "down"',elements:[{name:"literal",value:'"up"'},{name:"literal",value:'"down"'}]},description:"",defaultValue:{value:'"up"',computed:!1}},enableConfirmation:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{Xe as C};
