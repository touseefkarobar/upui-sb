import{r,j as n,R as g}from"./iframe-CpeAJN_4.js";import{r as _}from"./index-Cc9ibHlN.js";import{S as v}from"./index-CsectdpO.js";import{H as C}from"./Heading-BDEZPdni.js";import{C as T}from"./CloseIcon-Bepgo6DY.js";import{F as x}from"./FilledIcon-DXc9s0FQ.js";import{C as R}from"./index-xyOPxu5j.js";import{T as O}from"./index-C2S8pv6t.js";const E="_overlay_1i0d0_1",j="_modal_1i0d0_14",M="_header_1i0d0_24",k="_body_1i0d0_35",N="_footer_1i0d0_39",S="_modaltrigger_1i0d0_44",L="_popuptrigger_1i0d0_49",q="_popup_1i0d0_49",a={overlay:E,modal:j,header:M,body:k,footer:N,modaltrigger:S,popuptrigger:L,popup:q},u=r.createContext(void 0),b=({children:t,onClose:e,as:o="modal",xOffset:i=0,yOffset:f=8,align:s="right"})=>{const[l,c]=r.useState(!1),[m,p]=r.useState(""),w=r.useRef(null),h=()=>c(!0),y=()=>{c(!1),p(""),e&&e()};return n.jsx(u.Provider,{value:{isOpen:l,open:h,close:y,selectedTab:m,setSelectedTab:p,triggerRef:w,as:o,xOffset:i,yOffset:f,align:s},children:t})},P=({children:t})=>{const e=r.useContext(u);if(!e)throw new Error("Modal.Trigger must be used within Modal");return n.jsx("div",{ref:e.triggerRef,className:`${a.modaltrigger} ${e.as==="pop-up"?a.popuptrigger:""}`,onClick:e.open,children:t})},z=({children:t})=>{const e=r.useContext(u),o=r.useRef(null),[i,f]=r.useState({top:0,left:0});return r.useLayoutEffect(()=>{if(!e||!e.isOpen||e.as!=="pop-up")return;const s=()=>{if(!e.triggerRef.current||!o.current)return;const l=e.triggerRef.current.getBoundingClientRect(),c=o.current.getBoundingClientRect(),m=l.bottom+e.yOffset+window.scrollY,p=e.align==="right"?l.right-c.width+e.xOffset+window.scrollX:l.left+e.xOffset+window.scrollX;f({top:m,left:p})};return s(),window.addEventListener("resize",s),window.addEventListener("scroll",s,!0),()=>{window.removeEventListener("resize",s),window.removeEventListener("scroll",s,!0)}},[e==null?void 0:e.isOpen,e==null?void 0:e.as,e==null?void 0:e.align,e==null?void 0:e.xOffset,e==null?void 0:e.yOffset,e==null?void 0:e.triggerRef]),r.useEffect(()=>{if(!e||!e.isOpen||e.as!=="pop-up")return;const s=l=>{!o.current||!e.triggerRef.current||o.current.contains(l.target)||e.triggerRef.current.contains(l.target)||e.close()};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[e==null?void 0:e.isOpen,e==null?void 0:e.as,e==null?void 0:e.triggerRef]),!e||!e.isOpen?null:e.as==="pop-up"?_.createPortal(n.jsx("div",{ref:o,className:a.popup,style:{top:i.top,left:i.left},onClick:s=>s.stopPropagation(),children:t}),document.body):n.jsx("div",{className:a.overlay,onClick:e.close,children:n.jsx("div",{className:a.modal,onClick:s=>s.stopPropagation(),children:t})})},I=({children:t})=>{const e=r.useContext(u);return!e||!e.isOpen?null:n.jsxs(v,{direction:"horizontal",className:`${a.header}`,children:[n.jsx(C,{level:2,color:"var(--pac-upui-white)",children:t}),n.jsx(x,{onClick:e.close,icon:T,color:"var(--pac-upui-white)",size:"xlarge"})," "]})},V=({id:t,children:e})=>{const o=r.useContext(u);if(!o)throw new Error("Modal.Tab must be used within Modal");return n.jsx(O,{value:t,selected:o.selectedTab,onSelected:()=>o.setSelectedTab(t),children:e})},B=({children:t})=>{const e=r.useContext(u);return!e||!e.isOpen?null:(g.useEffect(()=>{if(e.selectedTab===""){const o=g.Children.toArray(t);for(const i of o)if(g.isValidElement(i)&&i.props.id){e.setSelectedTab(i.props.id);break}}},[t,e.selectedTab,e]),n.jsx(R,{padded:"8px",style:{backgroundColor:"var(--pac-upui-background)"},children:n.jsx(v,{direction:"horizontal",className:a.tabs,children:t})}))},F=({id:t,children:e})=>{const o=r.useContext(u);return!o||t&&o.selectedTab&&o.selectedTab!==t?null:n.jsx("div",{className:a.body,children:e})},H=({children:t})=>n.jsx("div",{className:a.footer,children:t}),d=b;d.Trigger=P;d.Content=z;d.Header=I;d.Tabs=B;d.Tab=V;d.Body=F;d.Footer=H;const K=d,Q=()=>{const t=r.useContext(u);if(!t)throw new Error("useModal must be used within a Modal component");return t};b.__docgenInfo={description:"",methods:[],displayName:"ModalRoot",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},as:{required:!1,tsType:{name:"union",raw:'"modal" | "pop-up"',elements:[{name:"literal",value:'"modal"'},{name:"literal",value:'"pop-up"'}]},description:"",defaultValue:{value:'"modal"',computed:!1}},xOffset:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},yOffset:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},align:{required:!1,tsType:{name:"union",raw:'"left" | "right"',elements:[{name:"literal",value:'"left"'},{name:"literal",value:'"right"'}]},description:"",defaultValue:{value:'"right"',computed:!1}}}};export{K as M,Q as u};
