import{r as l,j as e}from"./iframe-CpXtHLb-.js";import{S as ie}from"./index-CFPL7f8B.js";import{A as C}from"./index-C_Iyn3NS.js";import{F as j}from"./index-BAv2M7MQ.js";import{I as oe}from"./index-ROsMqdH5.js";import{S as F}from"./index-BGM0XMqq.js";import{B as d}from"./index-DxqB6z_p.js";import{T as c}from"./Text-30Lx6Moh.js";import{a as T}from"./index-Dq7h7Pqt.js";import{T as u}from"./TextLink-DMBxaSvM.js";import{U as ae,S as le}from"./UpdatesIcon-DqWWT-KV.js";import{O as Y}from"./OpenIcon-CGCHmkNB.js";import{C as de}from"./CloseIcon-1_gHhPOF.js";import{L as ue}from"./LearningIcon-sXxWeOAE.js";const{__:s}=wp.i18n,he=({textDomain:t,activateLicenseApi:x,deactivateLicenseApi:_,forceLicenseCheckApi:I,isFromDiviMarket:i,licenseData:h={key:"",licence_status:"",licence_expire:"",last_check:null},findLicenseKeyLink:q,setLicenseData:o,docsLink:M})=>{const p=h.key!==""&&h.licence_status==="active",b="License key cannot be empty",[y,L]=l.useState(""),[S,f]=l.useState(!1),[R,g]=l.useState(!1),[A,m]=l.useState(!1),[k,w]=l.useState("info"),[K,v]=l.useState("There was a problem activating the license: Invalid licence key"),O=i?"Plugin Purchased From The Divi Marketplace":"License Key",H="Enter the license key you received when purchased this product. You can access your license key any time by logging into your account on the Pee-Aye Creative website. You can learn more about this in our ",U="License Key Management Guide.",V="https://www.peeayecreative.com/docs/product-license-key-management/",B="Thanks for installing our plugin! Since you purchased this plugin through the",N="Divi Marketplace,",Q="you do",G="not need to enter a license key here.",z="To receive updates, just make sure your Elegant Themes username and API key are entered into your website under",J="Divi>Theme Options>Updates.",W="That's how Elegant Themes verifies your purchases and delivers updates for all Marketplace products.",X="If you need help finding your API key or managing your Elegant Themes account, you can use their ",Z="Customer FAQ",$=" or reach out to their team via the support chat on ",D="elegantthemes.com.",ee="License Key",te="Enter Your License Key Here",P=()=>{window.open(q,"_blank")},a=(r,n)=>{w(r),v(n),m(!0)},E=(r,n)=>{f(!1),r.data.status==="success"?n==null||n():a("error",r.data.message||"Something went wrong")},se=async r=>{if(r.preventDefault(),!!x){if(!y.trim()){a("error",b);return}f(!0);try{const n=await T.post(x,{key:y});E(n,()=>{const ce={key:y,last_check:Math.floor(Date.now()/1e3),licence_status:n.data.licence_status,licence_expire:n.data.licence_expire};o==null||o(ce),a("success","License Key Connected Successfully")})}catch{f(!1),a("error","Activation failed")}}},ne=async r=>{if(r.preventDefault(),!!_){f(!0);try{const n=await T.post(_,{request:"deactivate"});E(n,()=>{L(""),o==null||o({key:"",last_check:"",licence_status:"",licence_expire:""}),a("info",n.data.message)})}catch{f(!1),a("error","Deactivation failed")}}},re=r=>{r.preventDefault(),I&&(g(!0),T.post(I).then(function(n){n.data.status==="success"?(g(!1),w("success"),v(n.data.message),m(!0)):(g(!1),w("error"),v(n.data.message),m(!0))}))};return e.jsx(ie,{title:s(O,t),children:e.jsxs(F,{gap:15,children:[i?e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[s(B,t)," ",e.jsx(c,{weight:"semibold",as:"span",children:s(N,t)})," ",s(Q,t)," ",e.jsx(c,{weight:"semibold",as:"span",children:s(G,t)})]}),e.jsxs(c,{children:[s(z,t)," ",e.jsx(c,{weight:"semibold",as:"span",children:s(J,t)})," ",s(W,t)]}),e.jsxs(c,{children:[s(X,t),e.jsx(u,{href:"https://www.elegantthemes.com/marketplace/customer-faq/",target:"_blank",children:s(Z,t)}),s($,t),e.jsx(u,{href:"https://www.elegantthemes.com/",target:"_blank",children:s(D,t)})]})]}):e.jsxs(c,{children:[s(H,t),e.jsxs(u,{href:V,target:"_blank",children:[" ",s(U,t)]})]}),!i&&(h.key!==""&&h.licence_status==="active"?e.jsx(d,{onClick:P,leftIcon:Y,variant:"primary",children:s("View Your Account",t)}):e.jsx(d,{onClick:P,leftIcon:Y,variant:"primary",children:s("Find License Key In Your Account",t)})),!i&&A&&e.jsx(C,{width:"stretch",type:k,title:s(K,t),description:k==="error"&&K!==b?e.jsxs(c,{children:[s("Please check the",t)," ",e.jsx(u,{href:M,target:"_blank",children:s("license key troubleshooting & FAQs",t)})," ",s("to learn more about this error and what steps to take next.",t)]}):""}),i&&e.jsx(C,{width:"stretch",type:"light",title:s("Prefer a lifetime license?",t),description:e.jsxs(e.Fragment,{children:[e.jsxs(c,{children:[s("The Divi Marketplace only offers annual licenses, but we also sell this plugin on our own website with a lifetime purchase option at ",t),e.jsx(u,{href:"https://www.peeayecreative.com/shop/",target:"_blank",children:s("peeayecreative.com/shop.",t)}),s(" If you decide to switch to the lifetime version, be sure to ",t),e.jsx(u,{href:"https://www.peeayecreative.com/docs/divi-marketplace-customers/",target:"_blank",children:s("follow this guide",t)}),s(" for a few important steps on replacing the plugin file.",t)]}),e.jsx(d,{style:{marginTop:"15px"},leftIcon:ue,variant:"primary",children:s("Learn More",t)})]})}),!i&&e.jsx("form",{id:"license-activiation-form",children:e.jsxs(F,{gap:15,children:[e.jsxs(j,{id:"License Key",children:[e.jsx(j.Title,{children:s(ee,t)}),e.jsx(j.Field,{children:e.jsx(oe,{"aria-invalid":A&&k==="error",name:"license-activation-key",autoComplete:"off",readOnly:p,disabled:p,placeholder:p?h.key:s(te,t),value:p?"":y,onChange:r=>L(r.target.value)})})]}),p?e.jsxs(e.Fragment,{children:[e.jsx(d,{onClick:ne,leftIcon:de,variant:"danger",loading:S,children:s("Deactivate",t)}),e.jsx(c,{children:s("If you recently migrated your site to a new domain and your license is still linked to the old domain, click this button to recheck and update your license status with our server. This requires an available instance of the license key in your account. If your key is limited to a single site, you must first remove it from the Pee-Aye Creative account area.",t)}),e.jsx(d,{onClick:re,leftIcon:ae,variant:"primary",loading:R,children:s("Relink License",t)})]}):e.jsx(d,{onClick:se,leftIcon:le,variant:"secondary",loading:S,children:s("Save Changes",t)})]})})]})})};he.__docgenInfo={description:"",methods:[],displayName:"LicensePage",props:{licenseData:{defaultValue:{value:`{\r
  key: "",\r
  licence_status: "",\r
  licence_expire: "",\r
  last_check: null,\r
}`,computed:!1},required:!1}}};export{he as L};
