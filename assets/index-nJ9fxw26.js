import{R as u,j as f}from"./iframe-3yMaT3T2.js";import{C as V}from"./CloseIcon-7VB8nj1V.js";const F="_container_nkgn5_1",G="_disabled_nkgn5_22",J="_input_nkgn5_27",Q="_tag_nkgn5_31",g={container:F,disabled:G,input:J,tag:Q,"tag-label":"_tag-label_nkgn5_46","remove-button":"_remove-button_nkgn5_51"},I=r=>r.trim(),d={email:r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),"ip-address":r=>/^(25[0-5]|2[0-4]\d|1?\d?\d)(\.(25[0-5]|2[0-4]\d|1?\d?\d)){3}$/.test(r)},U=({allowedList:r,value:C,defaultValue:k=[],onChange:T,onInputChange:v,allowDuplicates:y=!1,validateTag:p,className:j,disabled:i,placeholder:q="Type and press enter…",onKeyDown:c,...E})=>{const h=Array.isArray(C),[N,R]=u.useState(k),[l,x]=u.useState(""),$=u.useRef(null);u.useEffect(()=>{h||R(k)},[k,h]);const n=h?C:N,o=u.useCallback(e=>{h||R(e),T==null||T(e)},[h,T]),b=u.useCallback(e=>{const s=I(e);s&&(!y&&n.some(a=>a.localeCompare(s,void 0,{sensitivity:"accent"})===0)||p&&!p(s,n)||Array.isArray(r)&&r.length>0&&!r.some(t=>{var a;return((a=d[t])==null?void 0:a.call(d,s))===!0})||(o([...n,s]),x("")))},[y,n,o,p,r]),_=u.useCallback(e=>{const s=e.map(t=>I(t)).filter(t=>!(!t||!y&&n.some(m=>m.localeCompare(t,void 0,{sensitivity:"accent"})===0)||p&&!p(t,n)||Array.isArray(r)&&r.length>0&&!r.some(a=>{var m;return((m=d[a])==null?void 0:m.call(d,t))===!0})));if(s.length>0){const t=y?s:s.filter((a,m,B)=>B.findIndex(O=>O.localeCompare(a,void 0,{sensitivity:"accent"})===0)===m);o([...n,...t]),x("")}},[y,n,o,p,r]),A=u.useCallback(e=>{if(i)return;const s=n.filter((t,a)=>a!==e);o(s)},[i,n,o]),P=u.useCallback(e=>{if(i){c==null||c(e);return}if(e.key==="Enter")if(e.preventDefault(),l.includes(",")){const s=l.split(",").map(t=>t.trim()).filter(t=>t.length>0);s.length>0&&_(s)}else b(l);else e.key===" "&&/\s{1,}$/.test(l)?(e.preventDefault(),b(l.trim())):e.key==="Backspace"&&l.length===0&&n.length&&(e.preventDefault(),A(n.length-1));c==null||c(e)},[i,b,_,A,l,c,n]),M=u.useCallback(e=>{i||(x(e.target.value),v==null||v(e))},[i,v]),H=u.useCallback(e=>{if(i)return;const s=e.clipboardData.getData("text");if(s.includes(",")||s.includes(`
`)){e.preventDefault();const t=s.split(/[,\n]+/).map(a=>a.trim()).filter(a=>a.length>0);t.length>0&&(l.trim()&&t.unshift(l.trim()),_(t))}},[i,l,_]),S=u.useCallback(()=>{var e;i||(e=$.current)==null||e.focus()},[i]),z=n.length===0&&l.length===0?q:"";return f.jsxs("div",{className:`${g.container} ${i?g.disabled:""} ${j||""}`,onClick:S,"data-disabled":i,children:[n.map((e,s)=>f.jsxs("span",{className:`${g.tag} pac-upui-h4 pac-upui-font-regular`,children:[f.jsx("span",{className:g["tag-label"],children:e}),f.jsx("button",{type:"button",className:g["remove-button"],onClick:t=>{t.stopPropagation(),A(s)},"aria-label":`Remove ${e}`,disabled:i,children:f.jsx(V,{size:"base",color:"var(--pac-upui-medium)"})})]},`${e}-${s}`)),f.jsx("input",{ref:$,type:"text",className:`${g.input} pac-upui-h4 pac-upui-font-regular`,value:l,onChange:M,onKeyDown:P,onPaste:H,placeholder:z,disabled:i,...E})]})};U.__docgenInfo={description:"",methods:[],displayName:"TagInput",props:{allowedList:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:'"email" | "ip-address"',elements:[{name:"literal",value:'"email"'},{name:"literal",value:'"ip-address"'}]}],raw:'Array<"email" | "ip-address">'},description:`Restrict new tags to specific predefined patterns.
Supported patterns: "email", "ip-address".
If omitted, any tag value is accepted (subject to validateTag / duplicates).`},value:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},defaultValue:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(tags: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"tags"}],return:{name:"void"}}},description:""},onInputChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:""},allowDuplicates:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},validateTag:{required:!1,tsType:{name:"signature",type:"function",raw:"(tag: string, currentTags: string[]) => boolean",signature:{arguments:[{type:{name:"string"},name:"tag"},{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"currentTags"}],return:{name:"boolean"}}},description:""},placeholder:{defaultValue:{value:'"Type and press enter…"',computed:!1},required:!1}},composes:["Omit"]};export{U as T};
