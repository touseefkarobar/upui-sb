import{r as o,j as e}from"./iframe-sA0AJjb6.js";import{A as b}from"./AddIcon-BFozGaZ9.js";import{C as h}from"./CloseIcon-5gmcQvtq.js";import{F as f}from"./FilledIcon-Cy5P0dzL.js";import{T as R}from"./Text-F2YrE36q.js";import{F as q}from"./FaqIcon-DFpCHCiq.js";const C="_picker_dpgei_1",E="_errorTextContainer_dpgei_15",S="_add_dpgei_23",B="_error_dpgei_15",$="_image_dpgei_34",M="_removeBtn_dpgei_41",z="_filled_dpgei_51",A="_optionsMenu_dpgei_59",L="_optionItem_dpgei_73",t={picker:C,errorTextContainer:E,add:S,error:B,image:$,removeBtn:M,filled:z,optionsMenu:A,optionItem:L},W=i=>i.type.startsWith("image/"),U=({onChange:i,onOpenMediaLibrary:d,onUrlChange:u,className:I="",src:m,showMediaLibrary:g=!1})=>{const[c,l]=o.useState(m||null),[_,a]=o.useState(!1),[x,p]=o.useState(!1),n=o.useRef(null);o.useEffect(()=>{l(m||null),a(!1)},[m]);const w=r=>{var v;const s=(v=r.target.files)==null?void 0:v[0];if(a(!1),s){if(!W(s)){l(null),a(!0),i==null||i(null);return}const y=new FileReader;y.onload=P=>{var k;l((k=P.target)==null?void 0:k.result),i==null||i(s)},y.readAsDataURL(s)}else l(null)},j=r=>{r.stopPropagation(),l(null),a(!1),n.current&&(n.current.value=""),i==null||i(null),u==null||u(null)},T=r=>{var s;r.stopPropagation(),p(!1),(s=n.current)==null||s.click()},F=r=>{r.stopPropagation(),p(!1),d==null||d()},N=()=>{var r;c||(g?p(!x):(r=n.current)==null||r.click())};return e.jsxs("div",{className:`
        ${t.picker}
        ${c?t.filled:t.add}
        ${_?t.error:""}
        ${I}
      `.replace(/\s+/g," ").trim(),onClick:N,children:[e.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:w}),_?e.jsxs(R,{as:"div",className:`${t.errorTextContainer}`,children:[e.jsx(f,{icon:q,size:"large",fillColor:"#fff0ee",color:"#E34C2B"}),e.jsx("span",{className:t.errorText,children:"Invalid file type."})]}):c?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:c,alt:"Selected",className:t.image,onError:()=>a(!0)}),e.jsx(f,{onClick:j,className:t.removeBtn,icon:h,size:"large",fillColor:"var(--pac-upui-red-100)",color:"var(--pac-upui-red-300)"})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{icon:b,size:"large",fillColor:"white",color:"var(--pac-upui-icon)"}),g&&x&&e.jsxs("div",{className:t.optionsMenu,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{className:t.optionItem,onClick:T,children:"Upload New Image"}),e.jsx("button",{className:t.optionItem,onClick:F,children:"Media Library"})]})]})]})};U.__docgenInfo={description:"",methods:[],displayName:"ImagePicker",props:{src:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"Initial image URL to display"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File | null) => void",signature:{arguments:[{type:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},name:"file"}],return:{name:"void"}}},description:"Callback fired when a new file is selected or removed"},onOpenMediaLibrary:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback fired when user wants to open WordPress Media Library"},onUrlChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(url: string | null) => void",signature:{arguments:[{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"url"}],return:{name:"void"}}},description:"Callback fired when a URL is selected from media library"},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},showMediaLibrary:{required:!1,tsType:{name:"boolean"},description:"Show media library option (for WordPress integration)",defaultValue:{value:"false",computed:!1}}}};export{U as I};
