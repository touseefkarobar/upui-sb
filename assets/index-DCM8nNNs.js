import{r as c,j as e}from"./iframe-4__Lj5m0.js";import{A as P}from"./AddIcon-Cx2p6PET.js";import{C as h}from"./CloseIcon-CciG7g41.js";import{F as u}from"./FilledIcon-B2l6j3C3.js";import{T as R}from"./Text-CbBSvB4Z.js";import{F as b}from"./FaqIcon-CqKnWZzN.js";import{u as q}from"./useOutsideToggle-CcIkQAQQ.js";const E="_picker_dpgei_1",B="_errorTextContainer_dpgei_15",$="_add_dpgei_23",M="_error_dpgei_15",S="_image_dpgei_34",U="_removeBtn_dpgei_41",z="_filled_dpgei_51",A="_optionsMenu_dpgei_59",W="_optionItem_dpgei_73",t={picker:E,errorTextContainer:B,add:$,error:M,image:S,removeBtn:U,filled:z,optionsMenu:A,optionItem:W},L=i=>i.type.startsWith("image/"),V=({onChange:i,onOpenMediaLibrary:d,className:k="",src:p,showMediaLibrary:f=!1})=>{const[n,o]=c.useState(p||null),[g,l]=c.useState(!1),a=c.useRef(null),{isOpen:y,toggle:m,ref:I}=q(!1);c.useEffect(()=>{o(p||null),l(!1)},[p]);const j=r=>{var _;const s=(_=r.target.files)==null?void 0:_[0];if(l(!1),s){if(!L(s)){o(null),l(!0),i==null||i(null);return}const x=new FileReader;x.onload=C=>{var v;o((v=C.target)==null?void 0:v.result),i==null||i(s)},x.readAsDataURL(s)}else o(null)},T=r=>{r.stopPropagation(),o(null),l(!1),a.current&&(a.current.value=""),i==null||i(null)},w=r=>{var s;r.stopPropagation(),m(),(s=a.current)==null||s.click()},F=r=>{r.stopPropagation(),m(),d==null||d()},N=()=>{var r;n||(f?m():(r=a.current)==null||r.click())};return e.jsxs("div",{ref:I,className:`
        ${t.picker}
        ${n?t.filled:t.add}
        ${g?t.error:""}
        ${k}
      `.replace(/\s+/g," ").trim(),onClick:N,children:[e.jsx("input",{ref:a,type:"file",accept:"image/*",style:{display:"none"},onChange:j}),g?e.jsxs(R,{as:"div",className:`${t.errorTextContainer}`,children:[e.jsx(u,{icon:b,size:"large",fillColor:"#fff0ee",color:"#E34C2B"}),e.jsx("span",{className:t.errorText,children:"Invalid file type."})]}):n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n,alt:"Selected",className:t.image,onError:()=>l(!0)}),e.jsx(u,{onClick:T,className:t.removeBtn,icon:h,size:"large",fillColor:"var(--pac-upui-red-100)",color:"var(--pac-upui-red-300)"})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{icon:P,size:"large",fillColor:"white",color:"var(--pac-upui-icon)",style:{cursor:"pointer"}}),f&&y&&e.jsxs("div",{className:t.optionsMenu,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{className:t.optionItem,onClick:w,children:"Upload New Image"}),e.jsx("button",{className:t.optionItem,onClick:F,children:"Media Library"})]})]})]})};V.__docgenInfo={description:"",methods:[],displayName:"ImagePicker",props:{src:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"Initial image URL to display"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File | null) => void",signature:{arguments:[{type:{name:"union",raw:"File | null",elements:[{name:"File"},{name:"null"}]},name:"file"}],return:{name:"void"}}},description:"Callback fired when a new file is selected or removed"},onOpenMediaLibrary:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback fired when user wants to open WordPress Media Library"},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},showMediaLibrary:{required:!1,tsType:{name:"boolean"},description:"Show media library option (for WordPress integration)",defaultValue:{value:"false",computed:!1}}}};export{V as I};
